<!DOCTYPE html>
<html lang="pt-BR">
<head>
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#000000">
    </script>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: radial-gradient(circle at top, #0f2027, #203a43, #2c5364);
      color: #eee;
      padding: 20px;
      max-width: 700px;
      margin: auto;
      text-shadow: 0 0 10px #00e5ff;
    }
    h1 {
      text-align: center;
      color: #00e5ff;
      margin-bottom: 30px;
      font-size: 2.5em;
      text-shadow: 0 0 15px #00e5ff, 0 0 30px #00b0ff;
    }
    .buttons {
      display: flex;
      justify-content: center;
      margin-bottom: 20px;
      gap: 12px;
      flex-wrap: wrap;
    }
    button {
      padding: 12px 25px;
      background: linear-gradient(145deg, #0a0a0a, #1e1e1e);
      border: 1px solid #00e5ff;
      border-radius: 12px;
      color: #00e5ff;
      font-size: 17px;
      cursor: pointer;
      transition: 0.3s ease;
      box-shadow: 0 0 15px rgba(0,229,255,0.3);
    }
    button:hover {
      background: #00e5ff;
      color: #121212;
      box-shadow: 0 0 20px #00e5ff, 0 0 40px #00b0ff;
    }
    .ativo {
      background: #00e5ff !important;
      color: #121212 !important;
      box-shadow: 0 0 20px #00e5ff, 0 0 40px #00b0ff !important;
    }
    #musicList {
      margin-top: 20px;
      display: flex;
      flex-direction: column;
      gap: 15px;
      max-height: 400px;
      overflow-y: auto;
    }
    .music-item {
      cursor: pointer;
      padding: 12px 20px;
      background: rgba(0,0,0,0.5);
      border: 1px solid #00e5ff;
      border-radius: 12px;
      transition: 0.3s ease;
    }
    .music-item:hover {
      background: #00e5ff;
      color: #121212;
      box-shadow: 0 0 15px #00e5ff;
    }
    .music-title {
      font-size: 18px;
      font-weight: 600;
    }
    .music-author {
      font-size: 14px;
      font-style: italic;
      color: #aaa;
    }
    audio {
      width: 100%;
      height: 60px;
      margin-top: 25px;
      border-radius: 8px;
      background: #000;
      border: 1px solid #00e5ff;
      box-shadow: 0 0 15px rgba(0,229,255,0.3);
    }
    .controls {
      margin-top: 15px;
      text-align: center;
      color: #ccc;
    }
    .controls select, .controls input[type="range"] {
      margin: 0 8px;
    }
    .controls label {
      margin-right: 15px;
      user-select: none;
    }
    #metronomoContainer {
      display: none;
      justify-content: center;
      margin-top: 15px;
      gap: 10px;
      flex-wrap: wrap;
    }
    #metronomoContainer input {
      width: 60px;
      text-align: center;
    }
    h3 {
      text-align:center; 
      color:#00e5ff; 
      cursor:pointer; 
      margin-top:20px;
      text-shadow: 0 0 12px #00e5ff;
    }
  </style>
</head>
<body>
<div id="bloqueio" style="position:fixed;top:0;left:0;width:100%;height:100%;background:#111;color:#fff;display:flex;flex-direction:column;justify-content:center;align-items:center;z-index:9999;">
  <h2>Digite a senha para acessar o site</h2>
  <input type="password" id="senhaInput" style="padding:10px;font-size:16px;" placeholder="Senha">
  <button id="btnEntrar" style="padding:10px 20px;margin-top:10px;font-size:16px;">Entrar</button>
<a href="https://wa.me/558486222876?text=Ol√°,%20quero%20falar%20com%20voc√™s!" 
   target="_blank" 
   style="display: inline-block; margin-top: 10px; padding: 5px 15px; background-color: #25D366; color: white; border-radius: 8px; text-decoration: none; font-weight: bold;">
  üì± Fale conosco
</a>
  <p id="mensagem" style="color:red;margin-top:10px;"></p>
</div>

<script>
  const senhasValidas = 
["A002500","A002501","A0Q02502","A002D503","A0E02504","AB002505","A0T02506","A0J02507","A00T2508","A0G02509",
"A0R02510","A0H02511","A0A02512","A0K02513","A0L02514","A0F02515","A0M02516","A0Z02517","A002518","A0R02519",
"A0E02520","A0W02521","A0T02522","A0V02523","A0K02524","A0Y02525","A0R02526","A0Y02527","A0U02528","A0I02529",
"A0P02530","A0A02531","A0S02532","A0D02533","A0F02534","A0G02535","A0H02536","A0J02537","A0K02538","A00L2539",
"A0Z02540","A0X02541","A0C02542","A0V02543","A0B02544","A0N02545","A0M02546","A0N02547","A0B02548","A0V02549",
"A0C02550","A0X02551","A0Z02552","A0A02553","A0S02554","A0D02555","A0F02556","A0G02557","A0H02558","A0J02559",
"A0K02560","A0L02561","A0Q02562","A0W02563","A0E02564","A0R02565","A0T02566","A0Y02567","A0U02568","A0I02569",
"A0O02570","A0P02571","A0A02572","A0S02573","A0D02574","A0F02575","A0G02576","A0H02577","A0J02578","A0K02579",
"A0L02580","A002581","A002582","A002583","A002584","A0Z02585","A0X02586","A0C02587","A0V02588","A0B02589",
"A0B02590","A0N02591","A0M02592","A0Q02593","A0W02594","A0E02595"
];
 // coloque suas senhas aqui
  const bloqueio = document.getElementById('bloqueio');
  const senhaInput = document.getElementById('senhaInput');
  const btnEntrar = document.getElementById('btnEntrar');
  const mensagem = document.getElementById('mensagem');

  // verifica se j√° existe senha salva
  let senhaSalva = localStorage.getItem('senhaCache');
  if(senhaSalva && senhasValidas.includes(senhaSalva)){
    bloqueio.style.display = 'none'; // libera conte√∫do automaticamente
  }

  function verificarSenha(){
    const senha = senhaInput.value.trim();
    if(senhasValidas.includes(senha)){
      localStorage.setItem('senhaCache', senha);
      bloqueio.style.display = 'none';
    } else {
      mensagem.textContent = "Senha incorreta!";
      senhaInput.value = "";
    }
  }

  btnEntrar.addEventListener('click', verificarSenha);
  senhaInput.addEventListener('keydown', e => { if(e.key === 'Enter') verificarSenha(); });
</script>

<h1>Player</h1>

<div class="buttons">
  <button onclick="document.getElementById('fileInput').click()">üìÅ Carregar Arquivo Local</button>
</div>

<input type="file" id="fileInput" accept="audio/*" style="display:none" multiple onchange="carregarArquivos(event)" />

<div id="musicList"></div>

<audio id="audioPlayer" controls></audio>

<!-- Controles do Metr√¥nomo -->
<div id="metronomoContainer">
  <button id="btnMenosBPM">‚àí</button>
  <button id="btnMetronomo">üéµ Metr√¥nomo: OFF</button>
  <button id="btnMaisBPM">+</button>
  <input type="number" id="inputBPM" min="40" max="200" value="60" title="BPM (40 a 200)">
</div>

<hr>
<h3 onclick="alternarAvancado()">üéõÔ∏è Metr√¥nomo Loop e Equalizar</h3>

<div id="avancado" style="display:none;">
  <div class="buttons">
    <button id="btnInicioLoop" onclick="marcarInicioLoop()">‚ñ∂Ô∏è Marcar In√≠cio do Loop</button>
    <button id="btnFimLoop" onclick="marcarFimLoop()">‚èπÔ∏è Marcar Fim do Loop</button>
    <button id="btnDesativarLoop" onclick="desativarTrechoLoop()">‚õî Desativar Loop</button>
    <button id="btnLoopGeral" onclick="toggleLoopGeral()">üîÅ Repetir Lista: OFF</button>
    <button id="btnLoopMusica" onclick="toggleLoopMusica()">üîÇ Repetir M√∫sica: OFF</button>
    <button onclick="alternarVelocidade()">‚è© Velocidade: 1x</button>
  </div>
</div>

<div class="controls" id="equalizador" style="display:none;">
  <label>Grave:
    <input type="range" min="-30" max="30" value="0" oninput="ajustarEqualizador(0, this.value)">
  </label>
  <label>M√©dio:
    <input type="range" min="-30" max="30" value="0" oninput="ajustarEqualizador(1, this.value)">
  </label>
  <label>Agudo:
    <input type="range" min="-30" max="30" value="0" oninput="ajustarEqualizador(2, this.value)">
  </label>
</div>

<script>
const musicas = [];
const musicListDiv = document.getElementById('musicList');
const audioPlayer = document.getElementById('audioPlayer');
const btnLoopGeral = document.getElementById('btnLoopGeral');
const btnLoopMusica = document.getElementById('btnLoopMusica');
let repetirLista = false;
let repetirMusica = false;

function montarLista() {
  musicListDiv.innerHTML = '';
  musicas.forEach((musica, i) => {
    let autor = '', titulo = musica.nome;
    if (musica.nome.includes(' - ')) {
      [autor, titulo] = musica.nome.split(' - ').map(s => s.trim());
      titulo = titulo.replace(/\.[^/.]+$/, "");
    } else {
      titulo = musica.nome.replace(/\.[^/.]+$/, "");
    }

    const div = document.createElement('div');
    div.className = 'music-item';
    div.innerHTML = `<div class="music-title">${titulo}</div><div class="music-author">${autor}</div>`;
    div.onclick = () => tocarMusica(i);
    musicListDiv.appendChild(div);
  });
}

function carregarArquivos(event) {
  const files = event.target.files;
  for (let file of files) {
    const url = URL.createObjectURL(file);
    musicas.push({ nome: file.name, arquivo: url });
  }
  montarLista();
  if (musicas.length > 0) tocarMusica(0);
}

let musicaAtual = 0;

function tocarMusica(index) {
  musicaAtual = index;
  audioPlayer.src = musicas[index].arquivo;
  audioPlayer.play();
  audioPlayer.loop = repetirMusica;
  loopAtivo = false;
  loopInicio = 0;
  loopFim = 0;
}

audioPlayer.addEventListener('ended', () => {
  if (repetirMusica) return;
  if (repetirLista) {
    musicaAtual = (musicaAtual + 1) % musicas.length;
    tocarMusica(musicaAtual);
  } else if (musicaAtual + 1 < musicas.length) {
    musicaAtual++;
    tocarMusica(musicaAtual);
  }
});

function toggleLoopGeral() {
  repetirLista = !repetirLista;
  btnLoopGeral.innerText = repetirLista ? "üîÅ Repetir Lista: ON" : "üîÅ Repetir Lista: OFF";
}

function toggleLoopMusica() {
  repetirMusica = !repetirMusica;
  audioPlayer.loop = repetirMusica;
  btnLoopMusica.innerText = repetirMusica ? "üîÇ Repetir M√∫sica: ON" : "üîÇ Repetir M√∫sica: OFF";
}

// Equalizador
let audioCtx, sourceNode, gainNode, filters = [];
function initAudioContext() {
  if (!audioCtx) {
    audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    sourceNode = audioCtx.createMediaElementSource(audioPlayer);
    gainNode = audioCtx.createGain();
    const freqs = [60, 1000, 5000];
    filters = freqs.map(f => {
      let filter = audioCtx.createBiquadFilter();
      filter.type = "peaking";
      filter.frequency.value = f;
      filter.Q.value = 1;
      filter.gain.value = 0;
      return filter;
    });
    sourceNode.connect(filters[0]);
    filters.reduce((a, b) => (a.connect(b), b));
    filters[filters.length - 1].connect(gainNode);
    gainNode.connect(audioCtx.destination);
  }
}
function ajustarEqualizador(index, valor) {
  initAudioContext();
  filters[index].gain.value = parseFloat(valor);
}

// Loop de trecho
let loopInicio = 0, loopFim = 0, loopAtivo = false;
function marcarInicioLoop() {
  loopInicio = audioPlayer.currentTime;
  if (loopFim > 0 && loopFim <= loopInicio) loopFim = 0;
  loopAtivo = loopFim > loopInicio;

  document.getElementById('btnInicioLoop').classList.add('ativo');
  document.getElementById('btnFimLoop').classList.remove('ativo');
  document.getElementById('btnDesativarLoop').classList.remove('ativo');
}
function marcarFimLoop() {
  if (loopInicio === 0) return;
  loopFim = audioPlayer.currentTime;
  if (loopFim <= loopInicio) return;
  loopAtivo = true;

  document.getElementById('btnInicioLoop').classList.add('ativo');
  document.getElementById('btnFimLoop').classList.add('ativo');
  document.getElementById('btnDesativarLoop').classList.remove('ativo');
}
function desativarTrechoLoop() {
  loopAtivo = false;
  loopInicio = 0;
  loopFim = 0;

  document.getElementById('btnInicioLoop').classList.remove('ativo');
  document.getElementById('btnFimLoop').classList.remove('ativo');
  document.getElementById('btnDesativarLoop').classList.add('ativo');

  setTimeout(() => {
    document.getElementById('btnDesativarLoop').classList.remove('ativo');
  }, 1000);
}
audioPlayer.ontimeupdate = () => {
  if (loopAtivo && audioPlayer.currentTime >= loopFim && loopFim > loopInicio) {
    audioPlayer.currentTime = loopInicio;
    audioPlayer.play();
  }
};

// Velocidade
let velocidades = [0.5, 0.75, 1, 1.25, 1.5, 2];
let indiceVelocidade = 2;
function alternarVelocidade() {
  indiceVelocidade = (indiceVelocidade + 1) % velocidades.length;
  const novaVelocidade = velocidades[indiceVelocidade];
  audioPlayer.playbackRate = novaVelocidade;
  event.target.innerText = `‚è© Velocidade: ${novaVelocidade}x`;
}

// Mostrar/Ocultar avan√ßado com 3 estados
let modoAvancado = 0;
function alternarAvancado() {
  const divAvancado = document.getElementById('avancado');
  const eq = document.getElementById('equalizador');
  const met = document.getElementById('metronomoContainer');

  modoAvancado = (modoAvancado + 1) % 3;

  if (modoAvancado === 0) {
    divAvancado.style.display = 'none';
    eq.style.display = 'none';
    met.style.display = 'none';
  } else if (modoAvancado === 1) {
    divAvancado.style.display = 'block';
    met.style.display = 'flex';
    eq.style.display = 'none';
  } else if (modoAvancado === 2) {
    divAvancado.style.display = 'none';
    met.style.display = 'none';
    eq.style.display = 'flex';
  }
}

window.onload = montarLista;

// --- Metr√¥nomo ---
let metronomoAtivo = false;
let bpm = 60;
let intervalId = null;
let audioCtxGlobal = null;
function tocarClique() {
  if (!audioCtxGlobal) return;
  const osc = audioCtxGlobal.createOscillator();
  const gainNode = audioCtxGlobal.createGain();
  osc.type = 'square';
  osc.frequency.setValueAtTime(1000, audioCtxGlobal.currentTime);
  gainNode.gain.setValueAtTime(1, audioCtxGlobal.currentTime);
  gainNode.gain.exponentialRampToValueAtTime(0.001, audioCtxGlobal.currentTime + 0.05);
  osc.connect(gainNode);
  gainNode.connect(audioCtxGlobal.destination);
  osc.start(audioCtxGlobal.currentTime);
  osc.stop(audioCtxGlobal.currentTime + 0.05);
}
function iniciarMetronomo() {
  if (!audioCtxGlobal) {
    audioCtxGlobal = new (window.AudioContext || window.webkitAudioContext)();
  }
  if (intervalId) clearInterval(intervalId);
  const intervalo = 60000 / bpm;
  tocarClique();
  intervalId = setInterval(tocarClique, intervalo);
}
function pararMetronomo() {
  if (intervalId) {
    clearInterval(intervalId);
    intervalId = null;
  }
}
document.getElementById('btnMetronomo').onclick = () => {
  if (!audioCtxGlobal) {
    audioCtxGlobal = new (window.AudioContext || window.webkitAudioContext)();
  }
  metronomoAtivo = !metronomoAtivo;
  const btn = document.getElementById('btnMetronomo');
  if (metronomoAtivo) {
    btn.textContent = `üéµ Metr√¥nomo: ON (${bpm} BPM)`;
    iniciarMetronomo();
  } else {
    btn.textContent = 'üéµ Metr√¥nomo: OFF';
    pararMetronomo();
  }
};
document.getElementById('inputBPM').onchange = () => {
  let val = parseInt(inputBPM.value);
  if (isNaN(val) || val < 40) val = 40;
  else if (val > 200) val = 200;
  bpm = val;
  inputBPM.value = bpm;
  if (metronomoAtivo) {
    iniciarMetronomo();
    document.getElementById('btnMetronomo').textContent = `üéµ Metr√¥nomo: ON (${bpm} BPM)`;
  }
};
document.getElementById('btnMaisBPM').onclick = () => {
  if (bpm < 200) {
    bpm++;
    inputBPM.value = bpm;
    if (metronomoAtivo) iniciarMetronomo();
    document.getElementById('btnMetronomo').textContent = `üéµ Metr√¥nomo: ON (${bpm} BPM)`;
  }
};
document.getElementById('btnMenosBPM').onclick = () => {
  if (bpm > 40) {
    bpm--;
    inputBPM.value = bpm;
    if (metronomoAtivo) iniciarMetronomo();
    document.getElementById('btnMetronomo').textContent = `üéµ Metr√¥nomo: ON (${bpm} BPM)`;
  }
};
</script>
<button id="btnInstall" style="display:none;">üì≤ Instalar App</button>
<script>
let deferredPrompt;
const btnInstall = document.getElementById("btnInstall");
window.addEventListener("beforeinstallprompt", (e) => {
  e.preventDefault();
  deferredPrompt = e;
  btnInstall.style.display = "block"; // mostra o bot√£o
});

btnInstall.addEventListener("click", async () => {
  if (deferredPrompt) {
    deferredPrompt.prompt();
    const { outcome } = await deferredPrompt.userChoice;
    console.log("Resultado da instala√ß√£o:", outcome);
    deferredPrompt = null;
    btnInstall.style.display = "none";
  }
});

// Registrar o Service Worker
if ("serviceWorker" in navigator) {
  navigator.serviceWorker.register("sw.js");
}
</script>
</body>
</html>
